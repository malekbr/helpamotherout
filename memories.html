<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<title>mothr.io - Memories</title>
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
		<link rel="stylesheet" type="text/css" href="css/bootstrap-datepicker3.min.css">
		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
		<link rel="stylesheet" type="text/css" href="css/style.css">
	</head>

	<body>

		<!-- Different Tabs (Memories/Appointments/Tasks) in the nav bar -->
		<nav class="navbar navbar-default navbar-fixed-top">
			<div class="container">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">mothr.io</a>
				</div>
				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#">Memories <span class="sr-only">(current)</span></a></li>
						<li><a href="appointments.html">Appointments</a></li>
						<li><a href="tasks.html">Tasks</a></li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li class="navbar-text">Hi, <span class="navbar-username">Samantha</span></li>
						<li><button id="logout" class="navbar-btn btn btn-primary btn-block">Log out</button></li>
					</ul>
				</div><!-- /.navbar-collapse -->
			</div><!-- /.container-fluid -->		
		</nav>

			<div class="container" style="padding-top: 70px">
				<div class="row">

					<!-- Timeline for navigation across history. Currently coined; links to be implemented. -->
					<div id="timeline-sidebar" class="col-sm-2 sidebar">
						<h4>Timeline</h4>
							<ul class="timeline-main">
								<li class="timeline-year unfolded"><a href="#">2014 <span class="sr-only">(current)</span></a>
								<ul class="timeline-month-list">
									<li class="timeline-month"><a href="#">September</a></li>
									<li class="timeline-month selected"><a href="#">October <span class="sr-only">(current)</span></a></li>
								</ul>
							</li>
							<li class="timeline-year"><a href="#">2013</a></li>
						</ul>
					</div>

					<!-- The main screen -->
					<div id="entries" class = "col-sm-10">

						<!-- The button for adding new entries -->
						<button id="addEntry" class="btn btn-primary btn-block btn-lg"><span class="glyphicon glyphicon-plus"></span></button>

						<!-- New memory input dialogue -->
						<div id="new-entry">
							<form id="new-entry-form">
								<div class="row input-entry">
									<div class="col-sm-4"> <div class="thumbnail"><button class="btn btn-block btn-lg btn-default"><div class="glyphicon glyphicon-camera"></div><br>Upload a file</button></div>
									<div id="date" class="input-group date">
										<input id="new-entry-date" type="text" placeholder="Enter the memory's date" class="form-control"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
									</div>
								</div>
								<div class="entry-input-description col-sm-8">
									<textarea id="new-entry-text" class="entry-input-description-field" placeholder="Enter the memory's description"></textarea>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-offset-10 col-sm-2"><input type="submit" class="btn btn-primary btn-block" value="Save"></div>
							</div>
							</form>
							
						</div>
						<br>
						<div id="invalid-date" class="alert alert-danger" role="alert">

 							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
  							<span class="sr-only">Error:</span>
  							Enter a valid date
						</div>
						<!-- A memory template -->
						<div id="entry-block" class="row entry">
							<div class="col-sm-4"> <div class="thumbnail"><img src="images/birthday_cake.jpg"></div></div>
							<div class="col-sm-7">
								<h3> <span id="month"> January </span> <span id="day">1</span><sup> <span id="subscript">st</span></sup> , <span id="year"> 2001 </span></h3>
								<span id="entry-text"> entry text </span>
							</div>
							<div class="col-sm-1 modif">
								<div><button id="edit-btn" class="btn btn-block btn-lg btn-default"><span class="glyphicon glyphicon-pencil"></span></button></div>
								<div><button id="delete-btn" class="btn btn-block btn-lg btn-default delete-btn"><span class="glyphicon glyphicon-remove"></span></button></div>
							</div>
						</div>

					</div>
				</div>
			</div>

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script type="text/javascript">
			$(function(){
				var months={}
				months["01"] = "January";
				months["02"] = "February";
				months["03"] = "March";
				months["04"] = "April";
				months["05"] = "May";
				months["06"] = "June";
				months["07"] = "July";
				months["08"] = "August";
				months["09"] = "September";
				months["10"] = "October";
				months["11"] = "November";
				months["12"] = "December";

				$('.date').datepicker({});
				$('#new-entry').hide();
				$('#entry-block').hide();
				$('#invalid-date').hide();

				$('#addEntry').click(function(){
					$(this).hide(400);
					$('#new-entry').show(400);
				});

				//New memory input
				$('#new-entry-form').submit(function(){
					console.log(months.February);
					var hr = $('<hr />');
					var x =$("#entry-block").clone(true,true);		
					hr.appendTo("#entries");
					x.appendTo("#entries");
					x.show(400);
					

					xText = x.find("#entry-text")
					xText.html(($(this).find("#new-entry-text")).val());

					date = ($(this).find("#new-entry-date")).val();
					dateInFormat = new Date(date);
					if(dateInFormat == "Invalid Date"){
						x.remove();
						hr.remove();
						$('#invalid-date').show();

						return false;
					}
					month = date.substring(0,2);
					day = date.substring(3,5);
					year = date.substring(6,10);
					subscript = "th"
					if (day=="01" || day=="21" || day=="31"){
						subscript = "st"
					}
					else if( day=="02" || day == "22"){
						subscript = "2nd"
					}
					else if( day=="03" || day =="23"){
						subscript= "rd"
					}


					xMonth = x.find("#month");
					xMonth.html(months[month]);
					xDay = x.find("#day");
					xDay.html(day);
					xYear = x.find("#year");
					xYear.html(year);
					xSubscript = x.find("#subscript");
					xSubscript.html(subscript)
					
					$('#new-entry').hide(400);
					$('#addEntry').show(400);
					$('#invalid-date').hide();
					return false;
				});


				//Memory Erase buttons
				$('.delete-btn').click(function(){
					console.log("7amada");
					$(this.parentElement.parentElement.parentElement).hide(function(){
						console.log(this);
						$(this).remove();
					});
						
				});

				//Memory Edit buttons
				$('#edit-entry').hide();

				$('#edit-btn').click(function(){
					$('#addEntry').hide(400);
					$('#new-entry').hide(400)
					$('#edit-entry1').show(400)
				});
				

				//Loging out takes you to the login page
				$('#logout').click(function(){
					window.location.href = "login.html";
				});
			});
		</script>
		<script src="js/bootstrap-datepicker.min.js"></script>
	</body>
</html>